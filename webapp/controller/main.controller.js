sap.ui.define([
	"sap/ui/core/mvc/Controller",
	"sap/ui/model/json/JSONModel",
	"sap/m/MessageBox"
], function (Controller, JSONModel,MessageBox) {
	"use strict";
	return Controller.extend("asesoria2.asesoria2.controller.main", {
		onInit: function () {
			var formulario = new sap.ui.model.json.JSONModel({
				Rut: "",
				Nombre: "",
				Apellido: ""
			});
			this.getView().setModel(formulario, "Formulario");
		},
		/**
		 *@memberOf asesoria2.asesoria2.controller.main
		 */
		onCrear: function (oEvent) {
			//This code was generated by the layout editor.
			var oForm = this.getView().getModel("Formulario");
		    var oModel = this.getOwnerComponent().getModel("Backend"); 
		    var entrada = {};
		    entrada.Rut = oForm.oData.Rut;
		    entrada.Nombre = oForm.oData.Nombre;
		    entrada.Apellido = oForm.oData.Apellido;
		    oModel.create("/datos", entrada, {
		    success: function (data) {
		      //alert("ok");
		      MessageBox.show(
				"Registro creado correctamente.", {
				icon: MessageBox.Icon.INFORMATION,
				title: "Informaci√≥n",
				actions: [MessageBox.Action.YES, MessageBox.Action.NO],
				emphasizedAction: MessageBox.Action.YES,
				onClose: function (oAction) {   }
			}
		);
		      
		    },
		    error: function (response) {
		       alert(response);
		    }
		   });
		}
	});
});